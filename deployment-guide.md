# Руководство по деплою NovaAI University

В этом руководстве представлены различные способы деплоя приложения NovaAI University.

## Выбор оптимального метода деплоя

У нас есть три основных варианта деплоя:

1. **Стандартный способ (replit-deploy-start.cjs)**:
   - Запускает и API-сервер, и статический фронтенд
   - Работает в двух режимах: production и development
   - Рекомендуется для большинства случаев

2. **Только статический фронтенд (simple-static-server.cjs)**:
   - Обслуживает только HTML/CSS/JS без серверной функциональности
   - Полезно для демонстрации UI/UX без взаимодействия с сервером
   
3. **Альтернативные платформы (Vercel, Netlify)**:
   - Обеспечивают более стабильную работу и дополнительные возможности
   - Подробности в `alternative-deploy-guide.md`

## Метод 1: Стандартный деплой

### Шаг 1: Подготовка проекта

1. Соберите проект для production (опционально, но рекомендуется):
   ```bash
   npm run build
   ```

### Шаг 2: Запуск деплоя

```bash
node replit-deploy-start.cjs
```

Скрипт автоматически определит, запускаться ли в режиме production (если есть собранные файлы) или в режиме development.

### Особенности работы скрипта

- Запускает API-сервер на порту 5000
- Создает proxy для перенаправления API-запросов
- Устанавливает правильные MIME-типы для всех файлов
- Обеспечивает SPA-маршрутизацию

## Метод 2: Только статический фронтенд

Если вам нужно только продемонстрировать интерфейс без API:

1. Соберите проект:
   ```bash
   npm run build
   ```

2. Запустите статический сервер:
   ```bash
   node simple-static-server.cjs
   ```

## Метод 3: Деплой на Vercel

См. инструкции в `alternative-deploy-guide.md`

## Проверка работоспособности

Для проверки статуса сервера перейдите по адресу:
```
https://novacademy.replit.app/status
```

## Решение проблем

### Проблема с MIME-типами

Если вы видите неотформатированный HTML или текст вместо нормально отображаемого сайта:

- Убедитесь, что используете один из наших скриптов деплоя
- Все наши скрипты настроены для правильной передачи MIME-типов
- Стандартный деплой Replit может некорректно определять MIME-типы

### Сервер не запускается

1. Проверьте наличие всех необходимых зависимостей:
   ```bash
   npm install
   ```

2. Проверьте наличие директории `dist/public` (если запускаете в режиме production)

3. Проверьте логи на наличие ошибок

### API не отвечает

1. Проверьте, что API-сервер успешно запустился (должно быть сообщение в логах)
2. Убедитесь, что запросы отправляются с правильным URL (/api/...)
3. Проверьте соединение с базой данных

## Дополнительные рекомендации

1. Для production-окружения всегда выполняйте сборку проекта перед деплоем
2. Используйте команду `npm run build` для создания оптимизированных файлов
3. Для длительного хостинга рассмотрите возможность деплоя на Vercel или Netlify
4. Создайте резервные копии базы данных перед важными изменениями
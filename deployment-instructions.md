# Инструкция по исправлению проблем с деплоем NovaAI University на Vercel

## Проблемы, обнаруженные в текущем деплое

1. **Ошибки манифеста**: 
   - Синтаксическая ошибка в `manifest.json`
   - Исправлено путем обновления структуры файла

2. **Проблемы с Service Worker**: 
   - Ошибка в регистрации service worker
   - Временно отключен для диагностики

3. **CORS и API-прокси**: 
   - Настройки заголовков Access-Control в `vercel.json`
   - Разделены правила для OPTIONS и других методов
   - **ВАЖНО**: Исправлен URL API с `novaai-university.replit.app` на `workspace.replit.app`

4. **API-ошибки**:
   - Исправлен неправильный URL API в vercel.json
   - Все API-запросы теперь направляются на доступный сервер

5. **Диагностика**: 
   - Добавлен диагностический блок в `index.html`
   - Теперь показывает статус загрузки CSS/JS/API

## Как использовать подготовленный архив

1. Скачайте архив `vercel-deploy-updated.zip` (обновленный с исправленным API URL)
2. Распакуйте содержимое в локальную директорию
3. Загрузите все файлы в ваш GitHub-репозиторий
4. В Vercel выберите этот репозиторий и директорию для деплоя

> **Важно**: Убедитесь, что ваш Replit деплой доступен по адресу `https://workspace.replit.app`. Если ваш адрес отличается, внесите изменения в `vercel.json`, заменив `workspace` на ваш слаг в Replit.

## Что исправлено в архиве

1. **manifest.json**: 
   - Упрощена структура иконок
   - Исправлены синтаксические ошибки

2. **index.html**: 
   - Добавлена диагностика загрузки ресурсов
   - Отключен service worker
   - Вставлен блок с информацией о состоянии загрузки

3. **vercel.json**: 
   - Обновлены правила для CORS
   - Разделены методы OPTIONS и другие
   - Добавлен заголовок Authorization
   - **ИСПРАВЛЕНО**: URL API изменен с `novaai-university.replit.app` на `workspace.replit.app`

## Тестирование после деплоя

1. Откройте сайт после деплоя
2. Обратите внимание на диагностический блок в левом нижнем углу
3. Проверьте консоль браузера на наличие ошибок
4. Если CSS по-прежнему не загружается, обратите внимание на:
   - Content-Type заголовки для CSS файлов
   - Пути к файлам в index.html
   - Конфликты с редиректами

## Дополнительные шаги при необходимости

Если проблемы сохраняются:

1. Проверьте настройки сборки в Vercel
2. Временно переместите CSS инлайн в index.html
3. Проверьте режим работы браузера (обычный vs. инкогнито)
4. Очистите кэш браузера перед тестированием
# Инструкция по кастомному деплою NovaAI University на Replit

Мы создали специальный скрипт для решения проблем с отображением приложения при деплое.

## Шаг 1: Настройка деплоя

В интерфейсе Replit:

1. Нажмите на "Secrets" (замочек в левой панели)
2. Добавьте новый секрет:
   - Ключ: `REPL_DEPLOY_COMMAND`
   - Значение: `node replit-custom-deploy.js`

## Шаг 2: Запуск деплоя

1. Нажмите кнопку "Run" в верхней части страницы
2. Дождитесь сборки проекта (появится сообщение "NovaAI University | Кастомный деплой запущен!")
3. Откройте приложение, нажав "Open app" в правом верхнем углу

## Шаг 3: Использование отдельного скрипта (альтернативный вариант)

Если первый способ не сработал, вы можете запустить скрипт вручную:

```bash
node replit-custom-deploy.cjs
```

Обратите внимание на расширение `.cjs` - это необходимо для корректной работы в проекте с настройкой `"type": "module"` в package.json.

## Как работает кастомный деплой

Скрипт `replit-custom-deploy.js`:

1. Запускает отдельный API-сервер на порту 5000
2. Создает веб-сервер для статических файлов с правильными MIME-типами
3. Настраивает проксирование API-запросов
4. Правильно обрабатывает SPA маршрутизацию

## Проверка работоспособности

Для проверки работы сервера перейдите по адресу:
```
https://novacademy.replit.app/status
```

Вы должны увидеть JSON с информацией о статусе сервера.

## Решение проблем

Если у вас возникли проблемы с запуском:

1. Убедитесь, что проект успешно собран (`npm run build`)
2. Проверьте, что директория `dist/public` содержит все необходимые файлы
3. Проверьте логи на наличие ошибок (в консоли Replit)

## Важные замечания

- Данный скрипт замещает стандартный механизм деплоя Replit
- В продакшен-версии рекомендуется перейти на специализированную платформу для хостинга (Vercel, Netlify)
- Для более детальной настройки отредактируйте файл `replit-custom-deploy.js`